<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ²™å·´4å¤©3å¤œæ—…è¡Œ | äº¤äº’å¼è¡Œç¨‹è§„åˆ’</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@400;500;700&display=swap" rel="stylesheet">
    <!-- Chosen Palette: Earthy Calm -->
    <!-- Application Structure Plan: A single-page dashboard design with a sticky navigation bar for quick access to key thematic sections: Budget, Itinerary, Logistics, and Recommendations. This structure was chosen to transform the linear report into a non-linear, task-oriented tool. Users can immediately grasp the critical budget challenge via an interactive chart, then dive into the tabbed itinerary or filterable recommendations as needed. This prioritizes user discovery and quick information retrieval over the original report's narrative flow. -->
    <!-- Visualization & Content Choices: 
        - Budget Breakdown: Report Info -> Detailed cost table. Goal -> Inform & Compare. Viz -> Chart.js Donut Chart. Interaction -> Hover for details. Justification -> Visually impactful way to show cost proportions and the budget overrun.
        - Itinerary: Report Info -> Day-by-day text. Goal -> Organize. Viz -> Tabbed, timeline-style HTML/CSS layout. Interaction -> Click tabs to switch days. Justification -> Prevents a long wall of text, making daily plans easy to digest.
        - Recommendations: Report Info -> Lists of food/sights. Goal -> Organize & Inform. Viz -> Card-based grid. Interaction -> JS-powered buttons to filter by category. Justification -> Allows users to quickly find specific types of information.
    -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body {
            font-family: 'Noto Sans SC', sans-serif;
            background-color: #FDFBF8;
            color: #4B423B;
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 400px;
            margin-left: auto;
            margin-right: auto;
            height: 300px;
            max-height: 400px;
        }
        @media (min-width: 768px) {
            .chart-container {
                height: 350px;
            }
        }
        .nav-link {
            transition: color 0.3s, border-bottom-color 0.3s;
        }
        .nav-link:hover {
            color: #D97706; 
        }
        .active-tab {
            border-color: #D97706 !important;
            color: #D97706 !important;
            font-weight: 700;
        }
        .timeline-item::before {
            content: '';
            position: absolute;
            left: 1.25rem;
            top: 1.25rem;
            bottom: -1.25rem;
            width: 2px;
            background-color: #E5E7EB;
            transform: translateX(-50%);
        }
        .timeline-item:last-child::before {
            display: none;
        }
        .timeline-icon {
            z-index: 10;
        }
        .spinner {
            border: 4px solid rgba(0, 0, 0, 0.1);
            border-left-color: #D97706;
            border-radius: 50%;
            width: 24px;
            height: 24px;
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            to {
                transform: rotate(360deg);
            }
        }
    </style>
</head>
<body class="antialiased">

    <header class="bg-white shadow-sm sticky top-0 z-50">
        <nav class="container mx-auto px-6 py-3">
            <div class="flex justify-between items-center">
                <div class="text-xl font-bold text-amber-600">æ²™å·´ç»æµä¹‹æ—…</div>
                <div class="hidden md:flex space-x-8">
                    <a href="#budget" class="nav-link text-gray-600 border-b-2 border-transparent">é¢„ç®—æ¦‚è§ˆ</a>
                    <a href="#itinerary" class="nav-link text-gray-600 border-b-2 border-transparent">è¡Œç¨‹å®‰æ’</a>
                    <a href="#logistics" class="nav-link text-gray-600 border-b-2 border-transparent">äº¤é€šä½å®¿</a>
                    <a href="#recommendations" class="nav-link text-gray-600 border-b-2 border-transparent">ç¾é£Ÿæ™¯ç‚¹</a>
                    <a href="#tips" class="nav-link text-gray-600 border-b-2 border-transparent">tipsä¸é£é™©</a>
                </div>
            </div>
        </nav>
    </header>

    <main class="container mx-auto px-6 py-8 md:py-12">
        
        <section class="text-center mb-12">
            <h1 class="text-3xl md:text-5xl font-bold text-stone-800 mb-2">æ²™å·´äºšåº‡ä¸æ˜†è¾¾å±±</h1>
            <p class="text-lg md:text-xl text-stone-600">4å¤©3å¤œ Â· 6äººå›¢é˜Ÿ Â· æ²™å·´æ¢ç´¢ä¹‹æ—…</p>
        </section>

        <section id="budget" class="mb-16 scroll-mt-20">
            <h2 class="text-2xl md:text-3xl font-bold text-center mb-8 text-stone-800">é¢„ç®—æ¦‚è§ˆï¼šRM800çš„æé™æŒ‘æˆ˜</h2>
            <div class="bg-white p-6 md:p-8 rounded-xl shadow-lg">
                <div class="text-center mb-6">
                    <p class="text-stone-600">æ­¤è¡Œç¨‹çš„æ ¸å¿ƒæŒ‘æˆ˜åœ¨äºä¸¥æ ¼çš„é¢„ç®—æ§åˆ¶ã€‚æˆ‘ä»¬çš„åˆ†ææ˜¾ç¤ºï¼Œåœ¨12æœˆæ—…æ¸¸æ—ºå­£ï¼Œè¦å°†äººå‡å¼€é”€æ§åˆ¶åœ¨RM800å†…æå…·æŒ‘æˆ˜æ€§ã€‚ä¸‹æ–¹å›¾è¡¨å±•ç¤ºäº†åŸºäºâ€œæè‡´æ€§ä»·æ¯”â€ç­–ç•¥çš„é¢„ä¼°å¼€é”€åˆ†å¸ƒï¼Œè¯·æ³¨æ„æ½œåœ¨çš„è¶…æ”¯é£é™©ã€‚</p>
                </div>
                <div class="grid md:grid-cols-2 gap-8 items-center">
                    <div>
                        <div class="chart-container">
                            <canvas id="budgetChart"></canvas>
                        </div>
                    </div>
                    <div class="space-y-4">
                         <div class="flex justify-between items-center bg-red-50 border-l-4 border-red-500 p-4 rounded-lg">
                            <div>
                                <p class="font-bold text-red-800">è¶…æ”¯é¢„è­¦</p>
                                <p class="text-sm text-red-700">é¢„ä¼°æ€»é¢å·²è¶…å‡ºç›®æ ‡é¢„ç®—</p>
                            </div>
                            <div class="text-right">
                                <p class="text-2xl font-bold text-red-600">RM 1,317</p>
                                <p class="text-sm text-gray-500 line-through">ç›®æ ‡: RM 800</p>
                            </div>
                        </div>
                        <div id="budgetDetails" class="space-y-3"></div>
                    </div>
                </div>
            </div>
        </section>

        <section id="itinerary" class="mb-16 scroll-mt-20">
            <h2 class="text-2xl md:text-3xl font-bold text-center mb-8 text-stone-800">è¯¦ç»†è¡Œç¨‹è§„åˆ’</h2>
             <div class="bg-white p-6 md:p-8 rounded-xl shadow-lg">
                <div class="text-center mb-6">
                    <p class="text-stone-600">è¿™æ˜¯ä¸€ä¸ªå¿«èŠ‚å¥çš„è¡Œç¨‹ï¼Œæ—¨åœ¨æœ€å¤§é™åº¦åœ°åˆ©ç”¨æ‚¨çš„æ—¶é—´ã€‚ç‚¹å‡»ä¸‹æ–¹çš„æ—¥æœŸæ ‡ç­¾ï¼ŒæŸ¥çœ‹æ¯æ—¥çš„è¯¦ç»†æ´»åŠ¨å®‰æ’ã€äº¤é€šå’Œé¤é¥®å»ºè®®ã€‚</p>
                </div>
                <div class="border-b border-gray-200 mb-6">
                    <nav class="-mb-px flex space-x-6" id="itineraryTabs">
                        <button data-day="day1" class="itinerary-tab py-4 px-1 border-b-2 font-medium text-lg active-tab" style="border-color: #D97706;">ç¬¬ 1 å¤©</button>
                        <button data-day="day2" class="itinerary-tab py-4 px-1 border-b-2 border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 font-medium text-lg">ç¬¬ 2 å¤©</button>
                        <button data-day="day3" class="itinerary-tab py-4 px-1 border-b-2 border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 font-medium text-lg">ç¬¬ 3 å¤©</button>
                        <button data-day="day4" class="itinerary-tab py-4 px-1 border-b-2 border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 font-medium text-lg">ç¬¬ 4 å¤©</button>
                    </nav>
                </div>
                <div id="itineraryContent"></div>
            </div>
        </section>

        <section id="logistics" class="mb-16 scroll-mt-20">
            <h2 class="text-2xl md:text-3xl font-bold text-center mb-8 text-stone-800">äº¤é€šä¸ä½å®¿æ–¹æ¡ˆ</h2>
            <div class="text-center mb-8">
                <p class="text-stone-600 max-w-3xl mx-auto">åˆç†çš„äº¤é€šä¸ä½å®¿é€‰æ‹©æ˜¯æ§åˆ¶æˆæœ¬çš„å…³é”®ã€‚æˆ‘ä»¬å»ºè®®å›¢é˜Ÿç§Ÿç”¨MPVå¹¶åˆç§Ÿæ°‘å®¿ï¼Œä»¥å®ç°æˆæœ¬å’Œçµæ´»æ€§çš„æœ€ä½³å¹³è¡¡ã€‚</p>
            </div>
            <div class="grid md:grid-cols-2 gap-8">
                <div class="bg-white p-6 rounded-xl shadow-lg">
                    <h3 class="font-bold text-xl mb-4 text-amber-700">âœˆï¸ äº¤é€šç­–ç•¥</h3>
                    <p class="font-semibold mb-2">èˆªç­ï¼šç«‹å³é¢„è®¢ï¼</p>
                    <p class="mb-4 text-stone-600">12æœˆæ˜¯æ—ºå­£ï¼Œæœºç¥¨ä»·æ ¼åªä¼šæŒç»­ä¸Šæ¶¨ã€‚è¯·ç«‹å³é€šè¿‡äºšèˆª(AirAsia)ç­‰ä½æˆæœ¬èˆªç©ºå…¬å¸é¢„è®¢å‰éš†å¡(KUL)è‡³äºšåº‡(BKI)ä»¥åŠäºšåº‡(BKI)è‡³è¯—å·«(SBW)çš„æœºç¥¨ã€‚</p>
                    <p class="font-semibold mb-2">åœ°é¢äº¤é€šï¼šç§Ÿç”¨MPV</p>
                    <p class="text-stone-600">å¯¹äº6äººå›¢é˜Ÿï¼Œç§Ÿç”¨Perodua Alzaæˆ–ç±»ä¼¼MPVæ˜¯æœ€é«˜æ•ˆã€ç»æµçš„é€‰æ‹©ã€‚4å¤©æ€»ç§Ÿé‡‘çº¦RM920ï¼Œäººå‡ä»…RM153ï¼Œè¿œä½äºå‚åŠ æ—…è¡Œå›¢ã€‚æ¨èç§Ÿè½¦å…¬å¸ï¼šKK Rent A Car, Agtranã€‚</p>
                </div>
                <div class="bg-white p-6 rounded-xl shadow-lg">
                    <h3 class="font-bold text-xl mb-4 text-amber-700">ğŸ¨ ä½å®¿ç­–ç•¥</h3>
                    <p class="font-semibold mb-2">æ˜†è¾¾å±± (2æ™š): åº¦å‡å±‹</p>
                    <p class="mb-4 text-stone-600">æ¨èç§Ÿç”¨æ•´æ ‹æ°‘å®¿ï¼Œå¦‚ `Kimin's Kinabalu Retreat`ã€‚äººå‡æ¯æ™šçº¦RM125ï¼Œæä¾›å®½æ•ç©ºé—´å’Œå¨æˆ¿è®¾æ–½ï¼Œå¯è‡ªè¡Œçƒ¹é¥ªä»¥èŠ‚çœå¼€æ”¯ã€‚</p>
                    <p class="font-semibold mb-2">äºšåº‡ (1æ™š): å¸‚åŒºå…¬å¯“</p>
                    <p class="text-stone-600">æ¨è `The Borneo Suite` ç­‰å®¶åº­å¼å…¬å¯“ï¼Œä¸“ä¸ºå›¢é˜Ÿè®¾è®¡ï¼Œäººå‡æ¯æ™šä½è‡³RM54ï¼Œäº¤é€šä¾¿åˆ©ï¼Œæ€§ä»·æ¯”æé«˜ã€‚</p>
                </div>
            </div>
        </section>

        <section id="recommendations" class="mb-16 scroll-mt-20">
            <h2 class="text-2xl md:text-3xl font-bold text-center mb-8 text-stone-800">ç¾é£Ÿä¸æ™¯ç‚¹æ¨è</h2>
            <div class="bg-white p-6 md:p-8 rounded-xl shadow-lg">
                <div class="text-center mb-6">
                    <p class="text-stone-600">æˆ‘ä»¬ç²¾é€‰äº†æœ€å…·æ€§ä»·æ¯”çš„æœ¬åœ°ç¾é£Ÿå’Œæ™¯ç‚¹ï¼ŒåŠ©æ‚¨åœ¨ä½“éªŒåœ°é“é£æƒ…çš„åŒæ—¶ï¼Œå°†å¼€é”€é™è‡³æœ€ä½ã€‚ä½¿ç”¨ä¸‹æ–¹çš„æŒ‰é’®è¿›è¡Œç­›é€‰ã€‚</p>
                </div>
                <div class="flex justify-center space-x-4 mb-8" id="filter-buttons">
                    <button data-filter="all" class="filter-btn bg-amber-600 text-white px-4 py-2 rounded-full">å…¨éƒ¨</button>
                    <button data-filter="food" class="filter-btn bg-gray-200 text-gray-700 px-4 py-2 rounded-full">ç¾é£Ÿ</button>
                    <button data-filter="sight" class="filter-btn bg-gray-200 text-gray-700 px-4 py-2 rounded-full">æ™¯ç‚¹</button>
                </div>
                <div id="recommendations-grid" class="grid sm:grid-cols-2 lg:grid-cols-3 gap-6"></div>
            </div>
        </section>

        <section id="tips" class="scroll-mt-20">
            <h2 class="text-2xl md:text-3xl font-bold text-center mb-8 text-stone-800">çœé’±è´´å£«ä¸é£é™©ç®¡ç†</h2>
            <div class="grid md:grid-cols-2 gap-8">
                 <div class="bg-white p-6 rounded-xl shadow-lg border-l-4 border-green-500">
                    <h3 class="font-bold text-xl mb-4 text-green-700">ğŸ’¡ çœé’±å°è´´å£«</h3>
                    <ul class="list-disc list-inside space-y-2 text-stone-600">
                        <li><b>å³æ—¶è¡ŒåŠ¨:</b> æ—ºå­£æœºé…’ä»·æ ¼åªå‡ä¸é™ï¼Œè¶Šæ—©é¢„è®¢è¶Šçœé’±ã€‚</li>
                        <li><b>ç°é‡‘ä¸ºç‹:</b> è®¸å¤šæœ¬åœ°èŒ¶å®¤åªæ”¶ç°é‡‘ï¼Œè¯·å¤‡è¶³é©¬å¸ã€‚</li>
                        <li><b>å›¢é˜Ÿä¼˜åŠ¿:</b> æ‹¼å•ç§Ÿè½¦å’Œä½å®¿ï¼Œå¤§å¹…é™ä½äººå‡æˆæœ¬ã€‚</li>
                        <li><b>å–„ç”¨å¨æˆ¿:</b> å…¥ä½å¸¦å¨æˆ¿çš„æ°‘å®¿ï¼Œè‡ªå·±åŠ¨æ‰‹å‡†å¤‡æ™šé¤æˆ–æ—©é¤ã€‚</li>
                    </ul>
                </div>
                <div class="bg-white p-6 rounded-xl shadow-lg border-l-4 border-red-500">
                    <h3 class="font-bold text-xl mb-4 text-red-700">âš ï¸ é£é™©æç¤º</h3>
                    <ul class="list-disc list-inside space-y-2 text-stone-600">
                        <li><b>é¢„ç®—è¶…æ”¯:</b> RM800é¢„ç®—æä¸ºç´§å¼ ï¼Œè¯·ä¸ºæ½œåœ¨çš„æœºç¥¨æ¶¨ä»·å‡†å¤‡å¤‡ç”¨é‡‘ã€‚</li>
                        <li><b>æ—ºå­£æ‹¥å µ:</b> çƒ­é—¨æ™¯ç‚¹å’Œé¤å…å¯èƒ½éœ€è¦æ’é˜Ÿï¼Œè¯·åˆç†å®‰æ’æ—¶é—´ã€‚</li>
                        <li><b>å¤©æ°”å› ç´ :</b> 12æœˆæ˜¯é›¨å­£ï¼Œæ˜†è¾¾å±±å¯èƒ½å¤šé›¨å¤šé›¾ï¼Œå½±å“ç¥å±±è§‚æ™¯ã€‚</li>
                    </ul>
                </div>
            </div>
        </section>

    </main>

    <footer class="bg-stone-800 text-white mt-16">
        <div class="container mx-auto px-6 py-4 text-center text-sm">
            <p>äº¤äº’å¼è¡Œç¨‹è§„åˆ’ | ç¥æ‚¨æ—…é€”æ„‰å¿«ï¼</p>
        </div>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            
            const budgetData = {
                labels: ['æœºç¥¨', 'ä½å®¿', 'åœ°é¢äº¤é€š', 'é¤é¥®', 'æ™¯ç‚¹é—¨ç¥¨'],
                costs: [500, 304, 163, 300, 50],
                colors: ['#F59E0B', '#10B981', '#3B82F6', '#EF4444', '#8B5CF6'],
                icons: ['âœˆï¸', 'ğŸ¨', 'ğŸš—', 'ğŸ½ï¸', 'ğŸï¸']
            };

            const itineraryData = {
                day1: {
                    title: 'æŠµè¾¾äºšåº‡ & åŸå¸‚åˆæ¢',
                    items: [
                        { time: 'ä¸Šåˆ', icon: 'âœˆï¸', text: 'ä»å‰éš†å¡(KUL)é£å¾€äºšåº‡(BKI)ï¼ŒæŠµè¾¾ååœ¨æœºåœºå–è½¦ã€‚' },
                        { time: 'ä¸‹åˆ', icon: 'ğŸ½ï¸', text: 'åœ¨ã€æ€¡ä¸°èŒ¶å®¤ã€‘äº«ç”¨åˆé¤ï¼Œå“å°å»æ²™å’Œç‰›æ‚é¢ã€‚' },
                        { time: 'ä¸‹åˆ', icon: 'ğŸ•Œ', text: 'å‚è§‚ã€äºšåº‡å¸‚ç«‹æ¸…çœŸå¯ºã€‘(æ°´ä¸Šæ¸…çœŸå¯º)ï¼Œé—¨ç¥¨RM5ã€‚' },
                        { time: 'å‚æ™š', icon: 'ğŸŒ…', text: 'å‰å¾€ã€ä¸¹ç»’äºšè·¯æµ·æ»©ã€‘æ¬£èµä¸–ç•Œçº§æ—¥è½ã€‚' },
                        { time: 'æ™šä¸Š', icon: 'ğŸ¦', text: 'æ™šé¤å¯é€‰ã€å¤§èŒ„æ¥æµ·é²œã€‘æˆ–æ›´ç»æµçš„ã€ä¸¹ç»’äºšè·¯å¤œå¸‚ã€‘ã€‚' },
                        { time: 'æ™šä¸Š', icon: 'ğŸ¨', text: 'å…¥ä½äºšåº‡å¸‚åŒºé¢„è®¢çš„å®¶åº­å¼å…¬å¯“ã€‚' }
                    ]
                },
                day2: {
                    title: 'ç¥å±±ä¹‹è·¯ & æ˜†è¾¾å±±é£å…‰',
                    items: [
                        { time: 'ä¸Šåˆ', icon: 'ğŸš—', text: 'æ—©é¤åé©±è½¦çº¦2å°æ—¶å‰å¾€æ˜†è¾¾å±±ã€‚' },
                        { time: 'ä¸Šåˆ', icon: 'ğŸï¸', text: 'æ¸¸è§ˆã€ç¥å±±å…¬å›­ã€‘ï¼ŒåŠ¡å¿…æ—©åˆ°ä»¥è§‚èµä¸»å³°ã€‚é—¨ç¥¨RM10ã€‚' },
                        { time: 'ä¸­åˆ', icon: 'ğŸ½ï¸', text: 'åœ¨æ˜†è¾¾å±±å½“åœ°é¤å…äº«ç”¨åˆé¤ã€‚' },
                        { time: 'ä¸‹åˆ', icon: 'ğŸ–ï¸', text: 'å‚è§‚ã€æ˜†è¾¾å±±æˆ˜äº‰çºªå¿µå›­ã€‘ï¼Œé—¨ç¥¨RM4ã€‚' },
                        { time: 'ä¸‹åˆ', icon: 'ğŸ„', text: 'å‰å¾€ã€è¿ªè¨å¥¶ç‰›ç‰§åœºã€‘ï¼Œä¸å¥¶ç‰›äº’åŠ¨å¹¶æ‹ç…§ã€‚é—¨ç¥¨RM5ã€‚' },
                        { time: 'æ™šä¸Š', icon: 'ğŸ¡', text: 'å…¥ä½æ˜†è¾¾å±±æ°‘å®¿ï¼Œå¯è‡ªè¡Œçƒ§çƒ¤æˆ–ç«é”…ã€‚' }
                    ]
                },
                day3: {
                    title: 'æ™¨é›¾è§‚æ™¯ & è¿”å›äºšåº‡',
                    items: [
                        { time: 'ä¸Šåˆ', icon: 'ğŸŒ„', text: 'æ—©èµ·æ¬£èµç¥å±±æ™¨æ™¯ï¼ŒéšååŠç†é€€æˆ¿ã€‚' },
                        { time: 'ä¸­åˆ', icon: 'ğŸš—', text: 'é©¾è½¦è¿”å›äºšåº‡å¸‚åŒºã€‚' },
                        { time: 'ä¸­åˆ', icon: 'ğŸ½ï¸', text: 'åˆé¤å“å°ã€æ–°è®°è‚‰éª¨èŒ¶ã€‘ã€‚' },
                        { time: 'ä¸‹åˆ', icon: 'ğŸ›ï¸', text: 'å¯é€‰å‚è§‚ã€æ²™å·´å·åšç‰©é¦†ã€‘ï¼Œäº†è§£æœ¬åœ°å†å²æ–‡åŒ–ã€‚é—¨ç¥¨RM15ã€‚' },
                        { time: 'æ™šä¸Š', icon: 'ğŸœ', text: 'æ™šé¤åœ¨å¹³ä»·çš„ã€å¯ŒæºèŒ¶å®¤ã€‘äº«ç”¨ã€‚' },
                        { time: 'æ™šä¸Š', icon: 'ğŸ¨', text: 'å…¥ä½äºšåº‡å¸‚åŒºæ°‘å®¿ã€‚' }
                    ]
                },
                day4: {
                    title: 'å‘Šåˆ« & å›ç¨‹',
                    items: [
                        { time: 'ä¸Šåˆ', icon: 'ğŸ›ï¸', text: 'æ ¹æ®èˆªç­æ—¶é—´ï¼Œåœ¨å¸‚åŒºè´­ä¹°ç‰¹è‰²æ‰‹ä¿¡ã€‚' },
                        { time: 'ä¸­åˆ/ä¸‹åˆ', icon: 'ğŸš—', text: 'å‰å¾€æœºåœºè¿˜è½¦ã€‚' },
                        { time: 'ä¸‹åˆ', icon: 'âœˆï¸', text: 'åŠç†ç™»æœºæ‰‹ç»­ï¼Œæ­ä¹˜èˆªç­è¿”å›è¯—å·«(SBW)ã€‚' }
                    ]
                }
            };

            const recommendationsData = [
                { name: 'æ€¡ä¸°èŒ¶å®¤', category: 'food', desc: 'æµ·é²œå»æ²™å’Œç‰›æ‚æ±¤é¢é—»åï¼Œä»·æ ¼äº²æ°‘ï¼Œå¯èƒ½åªæ”¶ç°é‡‘ã€‚', price: 'äººå‡ RM20-30' },
                { name: 'æ–°è®°è‚‰éª¨èŒ¶', category: 'food', desc: 'ç”¨æ–™å®åœ¨ï¼Œæ±¤å¤´æµ“éƒï¼Œæ·±å—æœ¬åœ°äººå–œçˆ±ã€‚', price: 'äººå‡ RM25-40' },
                { name: 'å¯ŒæºèŒ¶å®¤', category: 'food', desc: 'è‡ªåŠ©å¼ä¸­å¼æ–™ç†ï¼Œæ‹‰èŒ¶å¥—é¤ç¾å‘³ï¼Œæ€§ä»·æ¯”é«˜ã€‚', price: 'äººå‡ RM15-25' },
                { name: 'ä¸¹ç»’äºšè·¯å¤œå¸‚', category: 'food', desc: 'ä½“éªŒæ²™çˆ¹ã€çƒ¤é¸¡ç¿…ç­‰é©¬æ¥é£å‘³å°åƒï¼Œç»æµå®æƒ ã€‚', price: 'äººå‡ RM15-30' },
                { name: 'ç¥å±±å…¬å›­', category: 'sight', desc: 'ä¸–ç•Œè‡ªç„¶é—äº§ï¼Œè§‚èµç¥å±±ä¸»å³°çš„æœ€ä½³åœ°ç‚¹ã€‚', price: 'é—¨ç¥¨ RM10' },
                { name: 'è¿ªè¨å¥¶ç‰›ç‰§åœº', category: 'sight', desc: 'è¢«ç§°ä¸ºâ€œå°æ–°è¥¿å…°â€ï¼Œä»¥ç¥å±±ä¸ºèƒŒæ™¯çš„ç‰§åœºé£å…‰ã€‚', price: 'é—¨ç¥¨ RM5' },
                { name: 'å¸‚ç«‹æ¸…çœŸå¯º', category: 'sight', desc: 'è‘—åçš„æ°´ä¸Šæ¸…çœŸå¯ºï¼Œå»ºç­‘å®ä¼Ÿå£®è§‚ã€‚', price: 'é—¨ç¥¨ RM5' },
                { name: 'æ˜†è¾¾å±±æˆ˜äº‰çºªå¿µå›­', category: 'sight', desc: 'çºªå¿µäºŒæˆ˜å†å²çš„å®é™èŠ±å›­ã€‚', price: 'é—¨ç¥¨ RM4' },
                { name: 'ä¸¹ç»’äºšè·¯æµ·æ»©', category: 'sight', desc: 'æ¬£èµä¸–ç•Œä¸‰å¤§æœ€ç¾æ—¥è½ä¹‹ä¸€çš„ç»ä½³åœ°ç‚¹ã€‚', price: 'å…è´¹' }
            ];

            const budgetCtx = document.getElementById('budgetChart').getContext('2d');
            new Chart(budgetCtx, {
                type: 'doughnut',
                data: {
                    labels: budgetData.labels,
                    datasets: [{
                        data: budgetData.costs,
                        backgroundColor: budgetData.colors,
                        borderColor: '#FDFBF8',
                        borderWidth: 4,
                        hoverOffset: 8
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom',
                            labels: {
                                padding: 20,
                                font: {
                                    size: 14,
                                    family: "'Noto Sans SC', sans-serif"
                                }
                            }
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    let label = context.label || '';
                                    if (label) {
                                        label += ': ';
                                    }
                                    if (context.parsed !== null) {
                                        label += 'RM ' + context.parsed.toFixed(2);
                                    }
                                    return label;
                                }
                            }
                        }
                    },
                    cutout: '60%'
                }
            });

            const budgetDetailsContainer = document.getElementById('budgetDetails');
            budgetData.labels.forEach((label, index) => {
                const detailHtml = `
                    <div class="flex items-center justify-between p-3 bg-stone-50 rounded-lg">
                        <div class="flex items-center">
                            <span class="text-xl mr-3">${budgetData.icons[index]}span>
                            <span class="text-stone-700">${label}span>
                        </div>
                        <span class="font-bold text-stone-800">RM ${budgetData.costs[index].toFixed(2)}span>
                    </div>
                `;
                budgetDetailsContainer.innerHTML += detailHtml;
            });

            const itineraryContent = document.getElementById('itineraryContent');
            const itineraryTabs = document.getElementById('itineraryTabs');
            
            function renderItinerary(day) {
                const data = itineraryData[day];
                let contentHtml = `<h3 class="text-xl font-bold mb-6 text-amber-700">${data.title}</h3><div class="relative">`;
                data.items.forEach(item => {
                    contentHtml += `
                        <div class="timeline-item relative flex items-start mb-8 pl-12">
                            <div class="timeline-icon absolute left-0 top-0 flex items-center justify-center w-10 h-10 bg-gray-200 rounded-full">
                                <span class="text-xl">${item.icon}</span>
                            </div>
                            <div class="ml-4">
                                <p class="font-semibold text-stone-800">${item.time}</p>
                                <p class="text-stone-600">${item.text}</p>
                            </div>
                        </div>
                    `;
                });
                
                if (day === 'day3') {
                    contentHtml += `
                        <div class="flex justify-center mt-8">
                            <button id="geminiButton" class="bg-amber-600 hover:bg-amber-700 text-white font-bold py-3 px-6 rounded-full shadow-lg transition-transform transform hover:scale-105">
                                âœ¨ ä¸ºæˆ‘ä»¬çš„æœ€åä¸€æ™šç”Ÿæˆä¸€ä¸ªç‰¹åˆ«æ™šé¤è®¡åˆ’
                            </button>
                        </div>
                        <div id="geminiContent" class="mt-8 p-6 bg-amber-50 rounded-xl shadow-inner hidden">
                            <div id="geminiLoading" class="flex items-center justify-center space-x-2">
                                <div class="spinner"></div>
                                <span class="text-amber-800">æ­£åœ¨ç”Ÿæˆä¸­... è¯·ç¨å€™span>
                            </div>
                            <div id="geminiResult" class="text-stone-800 space-y-4"></div>
                        </div>
                    `;
                }
                
                contentHtml += `</div>`;
                itineraryContent.innerHTML = contentHtml;
                
                if (day === 'day3') {
                    document.getElementById('geminiButton').addEventListener('click', generateSpecialPlan);
                }
            }

            itineraryTabs.addEventListener('click', (e) => {
                if (e.target.classList.contains('itinerary-tab')) {
                    itineraryTabs.querySelector('.active-tab').classList.remove('active-tab');
                    e.target.classList.add('active-tab');
                    renderItinerary(e.target.dataset.day);
                }
            });

            async function generateSpecialPlan() {
                const geminiButton = document.getElementById('geminiButton');
                const geminiContent = document.getElementById('geminiContent');
                const geminiLoading = document.getElementById('geminiLoading');
                const geminiResult = document.getElementById('geminiResult');

                geminiContent.classList.remove('hidden');
                geminiLoading.classList.remove('hidden');
                geminiResult.classList.add('hidden');
                geminiResult.innerHTML = '';
                geminiButton.disabled = true;
                geminiButton.textContent = 'ç”Ÿæˆä¸­...';
                
                const userPrompt = 'æˆ‘æ­£åœ¨ä¸º6äººå›¢é˜Ÿè§„åˆ’ä¸€ä¸ªå»æ²™å·´äºšåº‡ï¼ˆKota Kinabaluï¼‰çš„æ—…è¡Œã€‚æˆ‘ä»¬æœ€åä¸€æ™šæƒ³æœ‰ä¸€ä¸ªç‰¹åˆ«çš„æ™šé¤ä½“éªŒï¼Œé¢„ç®—ç›¸å¯¹ç»æµå®æƒ ã€‚è¯·ä¸ºæˆ‘ä»¬æ¨èä¸€ä¸ªç‰¹åˆ«çš„æ™šé¤æˆ–æ´»åŠ¨è®¡åˆ’ï¼Œå¹¶æä¾›ç®€çŸ­çš„ç†ç”±ã€‚è¯·ç”¨ä¸­æ–‡å›ç­”ï¼Œä¸è¦è¶…è¿‡300å­—ã€‚';
                
                const payload = {
                    contents: [{ parts: [{ text: userPrompt }] }],
                    generationConfig: {
                        responseMimeType: "text/plain"
                    }
                };
                
                const apiKey = ""; 
                const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key=${apiKey}`;

                try {
                    let response = await fetch(apiUrl, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(payload)
                    });

                    if (!response.ok) {
                        throw new Error(`HTTP error! status: ${response.status}`);
                    }

                    const result = await response.json();
                    const text = result.candidates[0].content.parts[0].text;
                    
                    geminiResult.innerHTML = `
                        <h4 class="font-bold text-lg text-amber-800 mb-2">Geminiä¸ºæ‚¨æ¨èï¼š</h4>
                        <p class="text-stone-800">${text.replace(/\n/g, '<br>')}</p>
                    `;
                    geminiLoading.classList.add('hidden');
                    geminiResult.classList.remove('hidden');

                } catch (error) {
                    geminiResult.innerHTML = `<p class="text-red-600">æŠ±æ­‰ï¼Œç”Ÿæˆå¤±è´¥ã€‚è¯·ç¨åå†è¯•ã€‚</p>`;
                    console.error('Gemini API call failed:', error);
                } finally {
                    geminiButton.disabled = false;
                    geminiButton.textContent = 'âœ¨ ä¸ºæˆ‘ä»¬çš„æœ€åä¸€æ™šç”Ÿæˆä¸€ä¸ªç‰¹åˆ«æ™šé¤è®¡åˆ’';
                }
            }

            renderItinerary('day1');

            const recommendationsGrid = document.getElementById('recommendations-grid');
            const filterButtons = document.getElementById('filter-buttons');

            function renderRecommendations(filter = 'all') {
                recommendationsGrid.innerHTML = '';
                const filteredData = (filter === 'all')
                    ? recommendationsData
                    : recommendationsData.filter(item => item.category === filter);

                filteredData.forEach(item => {
                    const cardHtml = `
                        <div class="recommendation-card bg-stone-50 rounded-lg shadow-md overflow-hidden transition-transform transform hover:-translate-y-1" data-category="${item.category}">
                            <div class="p-5">
                                <div class="flex justify-between items-start mb-2">
                                    <h4 class="font-bold text-lg text-stone-800">${item.name}</h4>
                                    <span class="text-sm font-semibold ${item.category === 'food' ? 'bg-red-100 text-red-800' : 'bg-blue-100 text-blue-800'} px-2 py-1 rounded-full">${item.price}</span>
                                </div>
                                <p class="text-stone-600 text-sm">${item.desc}</p>
                            </div>
                        </div>
                    `;
                    recommendationsGrid.innerHTML += cardHtml;
                });
            }

            filterButtons.addEventListener('click', (e) => {
                if (e.target.classList.contains('filter-btn')) {
                    document.querySelector('.filter-btn.bg-amber-600').classList.remove('bg-amber-600', 'text-white');
                    e.target.classList.add('bg-amber-600', 'text-white');
                    e.target.classList.remove('bg-gray-200', 'text-gray-700');
                    const allOtherButtons = Array.from(filterButtons.querySelectorAll('.filter-btn'));
                    allOtherButtons.forEach(btn => {
                        if (btn !== e.target) {
                            btn.classList.add('bg-gray-200', 'text-gray-700');
                        }
                    });
                    renderRecommendations(e.target.dataset.filter);
                }
            });
            
            renderRecommendations('all');

            document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                anchor.addEventListener('click', function (e) {
                    e.preventDefault();
                    document.querySelector(this.getAttribute('href')).scrollIntoView({
                        behavior: 'smooth'
                    });
                });
            });
        });
    </script>
</body>

</html>
